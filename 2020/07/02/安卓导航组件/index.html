<!DOCTYPE html>
<html lang="zh-CN">





<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/Klien.png">
  <link rel="icon" type="image/png" href="/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="记往昔录今朝只待明时">
  <meta name="author" content="Klien">
  <meta name="keywords" content="安卓原生开发、python日常脚本、Developer">
  <title>安卓导航组件 - Klien-m&#39;s 博客</title>

  <link  rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    <link  rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/10.0.0/styles/androidstudio.min.css" />
  

  


<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_yg9cfy8wd6.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_pjno9b9zyxs.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script  src="/js/utils.js" ></script>
<meta name="generator" content="Hexo 4.2.1"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>Klien-m's 博客</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="view intro-2" id="background" parallax=true
         style="background: url('/img/1920-1080/android5.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="container text-center white-text fadeInUp">
            <span class="h2" id="subtitle">
              
            </span>

            
              
  <div class="mt-3 post-meta">
    <i class="iconfont icon-date-fill" aria-hidden="true"></i>
    <time datetime="2020-07-02 09:55">
      2020年7月2日 上午
    </time>
  </div>


<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      3.6k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      45
       分钟
    </span>
  

  
  
    
      <!-- 不蒜子统计文章PV -->
      <span id="busuanzi_container_page_pv" style="display: none">
        <i class="iconfont icon-eye" aria-hidden="true"></i>
        <span id="busuanzi_value_page_pv"></span> 次
      </span>
    
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid">
  <div class="row">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-md">
      <div class="container nopadding-md" id="board-ctn">
        <div class="py-5" id="board">
          <div class="post-content mx-auto" id="post">
            
              <p class="note note-info">
                
                  本文最后更新于：1 个月前
                
              </p>
            
            <article class="markdown-body">
              <p><a href="https://developer.android.google.cn/guide/navigation?hl=zh" target="_blank" rel="noopener">导航</a>是指支持用户导航、进入和退出应用中不同内容片段的交互。</p>
<a id="more"></a>

<h2 id="组成"><a href="#组成" class="headerlink" title="组成"></a>组成</h2><p>导航组件由以下三个关键部分组成：</p>
<ul>
<li>导航图 res/navigation/ 目录下文件  </li>
<li><code>NavHost</code>：显示导航图中目标的空白容器。导航组件包含一个默认 <code>NavHost</code> 实现(<code>NavHostFragment</code>)，可显示 Fragment 目标。</li>
<li><code>NavController</code>：在 <code>NavHost</code> 中管理应用导航的对象。当用户在整个应用中移动时，<code>NavController</code> 会安排 <code>NavHost</code> 中目标内容的交换。  </li>
</ul>
<h2 id="创建导航图"><a href="#创建导航图" class="headerlink" title="创建导航图"></a>创建导航图</h2><p>导航图是一种资源文件，其中包含所有目的地和操作。该图表会显示应用的所有导航路径。<br>要向项目添加导航图，请执行以下操作：</p>
<ol>
<li>在 “Project” 窗口中，右键点击 <code>res</code> 目录，然后依次选择 <strong>New &gt; Android Resource File</strong>。此时系统会显示 <strong>New Resource File</strong> 对话框。</li>
<li>在 <strong>File name</strong> 字段中输入名称，例如 “nav_graph”。</li>
<li>从 <strong>Resource type</strong> 下拉列表中选择 Navigation，然后点击 OK。</li>
</ol>
<p>当您添加首个导航图时，Android Studio 会在 <code>res</code> 目录内创建一个 <code>navigation</code> 资源目录。该目录包含您的导航图资源文件（例如 <code>nav_graph.xml</code>）。</p>
<h2 id="向Activity添加NavHost"><a href="#向Activity添加NavHost" class="headerlink" title="向Activity添加NavHost"></a>向Activity添加NavHost</h2><h3 id="通过XML添加NavHostFragment"><a href="#通过XML添加NavHostFragment" class="headerlink" title="通过XML添加NavHostFragment"></a>通过XML添加NavHostFragment</h3><div class="hljs"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">android.support.constraint.ConstraintLayout</span></span>
<span class="hljs-tag">    <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span></span>
<span class="hljs-tag">    <span class="hljs-attr">xmlns:app</span>=<span class="hljs-string">"http://schemas.android.com/apk/res-auto"</span></span>
<span class="hljs-tag">    <span class="hljs-attr">xmlns:tools</span>=<span class="hljs-string">"http://schemas.android.com/tools"</span></span>
<span class="hljs-tag">    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span></span>
<span class="hljs-tag">    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span></span>
<span class="hljs-tag">    <span class="hljs-attr">tools:context</span>=<span class="hljs-string">".MainActivity"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">androidx.appcompat.widget.Toolbar</span></span>
<span class="hljs-tag">        <span class="hljs-attr">...</span>/&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">fragment</span></span>
<span class="hljs-tag">        <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/nav_host_fragment"</span></span>
        &lt;!-- NavHost实现的类名称 --&gt;
        android:name="androidx.navigation.fragment.NavHostFragment"
        android:layout_width="0dp"
        android:layout_height="0dp"
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintRight_toRightOf="parent"
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintBottom_toBottomOf="parent"
        <span class="hljs-comment">&lt;!-- 确保NavHostFragment会拦截系统返回按钮。只能有一个默认NavHost。如果同一布局中有多个主机，务必仅指定一个默认NavHost。 --&gt;</span>
        app:defaultNavHost="true"
        <span class="hljs-comment">&lt;!-- 将NavHostFrament与导航图相关联。导航图会在此NavHostFragment中指定用户可以导航到的所有目的地。</span>
<span class="hljs-comment">        app:navGraph="@navigation/nav_graph" /&gt;</span>
<span class="hljs-comment"></span>
<span class="hljs-comment">    &lt;com.google.android.material.bottomnavigation.BottomNavigationView</span>
<span class="hljs-comment">        .../&gt;</span>
<span class="hljs-comment">&lt;/android.support.constraint.ConstraintLayout&gt;</span></code></pre></div>

<h3 id="使用-Layout-Editor-向-Activity-添加-NavHostFragment"><a href="#使用-Layout-Editor-向-Activity-添加-NavHostFragment" class="headerlink" title="使用 Layout Editor 向 Activity 添加 NavHostFragment"></a>使用 Layout Editor 向 Activity 添加 NavHostFragment</h3><ol>
<li>在项目文件列表中，双击 Activity 的布局 XML 文件，以在 Layout Editor 中将其打开。</li>
<li>在 <strong>Palette</strong> 窗格内，选择 Containers 类别。</li>
<li>将 NavHostFragment 视图拖动到 Activity 上。</li>
<li>在随即显示的 <strong>Navigation Graphs</strong> 对话框中，选择要与此 <code>NavHostFragment</code> 相关联的对应导航图，然后点击 OK。</li>
</ol>
<h2 id="将某个屏幕指定为起始目的地"><a href="#将某个屏幕指定为起始目的地" class="headerlink" title="将某个屏幕指定为起始目的地"></a>将某个屏幕指定为起始目的地</h2><ol>
<li>在 <strong>Design</strong> 标签页中，点击相应目的地，使其突出显示。</li>
<li>点击 <strong>Assign start destination</strong>（小房子） 按钮 。或者，您可以右键点击该目的地，然后点击 <strong>Set as Start Destination</strong>。</li>
</ol>
<h2 id="设计导航图"><a href="#设计导航图" class="headerlink" title="设计导航图"></a>设计导航图</h2><ul>
<li><a href="https://developer.android.com/guide/navigation/navigation-design-graph#top-level_navigation_graph" target="_blank" rel="noopener">顶级导航图</a></li>
<li><a href="https://developer.android.com/guide/navigation/navigation-design-graph#navigation_across_library_modules" target="_blank" rel="noopener">在库模块中导航</a></li>
</ul>
<h3 id="嵌套图表"><a href="#嵌套图表" class="headerlink" title="嵌套图表"></a>嵌套图表</h3><p>要将目的地归入一个嵌套图表中，操作如下：</p>
<ol>
<li>在 Navigation Editor 中，按住 <code>shift</code> 键，然后点击想要添加到嵌套图表中的目的地。</li>
<li>右键单击以打开上下文菜单，然后依次选择 <strong>Move to Nested Graph &gt; New Graph</strong>。目的地包含在嵌套图表中。<br>在代码中，传递将根图连接到嵌套图表的操作的操作的资源ID：</li>
</ol>
<div class="hljs"><pre><code class="hljs java">Navigation.findNavController(view).navigate(ID);</code></pre></div>

<h4 id="通过-lt-include-gt-引用其他导航图表"><a href="#通过-lt-include-gt-引用其他导航图表" class="headerlink" title="通过 &lt;include&gt; 引用其他导航图表"></a>通过 <code>&lt;include&gt;</code> 引用其他导航图表</h4><div class="hljs"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">include</span> <span class="hljs-attr">app:graph</span>=<span class="hljs-string">"@navigation/included_graph"</span> /&gt;</span></code></pre></div>

<h3 id="全局操作"><a href="#全局操作" class="headerlink" title="全局操作"></a>全局操作</h3><p>对于应用中的任何可通过多条路径到达的目的地，您都应定义可转到它的相应全局操作。全局操作可用于从任意位置导航到某目的地。</p>
<h4 id="创建全局操作"><a href="#创建全局操作" class="headerlink" title="创建全局操作"></a>创建全局操作</h4><p>要创建全局操作，请执行以下操作：</p>
<ol>
<li>在 <strong>Graph Editor</strong> 中，点击一个目的地，使其突出显示。</li>
<li>右键点击该目的地，以显示上下文菜单。</li>
<li>依次选择 <strong>Add Action &gt; Global</strong>。此时系统会在该目的地左侧显示一个箭头。</li>
</ol>
<h2 id="导航到目的地"><a href="#导航到目的地" class="headerlink" title="导航到目的地"></a>导航到目的地</h2><p>导航到目的地是使用 <code>NavController</code> 完成的，后者是一个在 <code>NavHost</code> 中管理应用导航的对象。每个 <code>NavHost</code> 均有自己的相应 <code>NavController</code> 。可以使用以下方法之一检索 <code>NavController</code> ：</p>
<p><strong>Kotlin</strong>：</p>
<ul>
<li>Fragment.findNavController()</li>
<li>View.findNavController()</li>
<li>Activity.findNavController(viewId: Int)  </li>
</ul>
<p><strong>Java</strong>：</p>
<ul>
<li>NavHostFragment.findNavController(Fragment)</li>
<li>Navigation.findNavController(Activity, @IdRes int viewId)</li>
<li>Navigation.findNavController(View)  </li>
</ul>
<p>检索 <code>NavController</code> 之后，可以调用navigate()的某个重载，以在各个目的地之间导航。</p>
<h3 id="使用-ID-导航"><a href="#使用-ID-导航" class="headerlink" title="使用 ID 导航"></a>使用 ID 导航</h3><p>对于按钮，可以使用 Navigation 类的 createNavigateOnClickListener(ID) 导航到目的地。</p>
<h4 id="为导航提供导航选项"><a href="#为导航提供导航选项" class="headerlink" title="为导航提供导航选项"></a>为导航提供导航选项</h4><p>在导航图中定义操作时，Navigation 会生成相应的 <code>NavAction</code> 类，其中包含为该操作定义的配置，包括如下内容：</p>
<ul>
<li>目的地：目标目的地的资源 ID。</li>
<li>默认参数：android.os.Bundle，包含目标目的地的默认值（如有提供）。</li>
<li>导航选项：导航选项，表示为 <code>NavOptions</code> 。此类包含从目标目的地往返的所有特殊配置，包括动画资源配置、弹出行为以及是否应在单一顶级模式下启动目的地。</li>
</ul>
<h3 id="使用URI导航"><a href="#使用URI导航" class="headerlink" title="使用URI导航"></a>使用URI导航</h3><p>使用 URI 进行导航时，返回堆栈不会重置。这与其他深层链接导航不同，后者在导航时会替换返回堆栈。不过，<code>popUpTo</code> 和 <code>popUpToInclusive</code> 仍会从返回堆栈中移除目的地，就像您使用 ID 导航一样。</p>
<h3 id="导航和返回堆栈"><a href="#导航和返回堆栈" class="headerlink" title="导航和返回堆栈"></a>导航和返回堆栈</h3><p>每次调用 <a href="https://developer.android.com/reference/androidx/navigation/NavController#navigate(int)" target="_blank" rel="noopener"><code>navigate()</code></a> 方法都会将另一目的地放置到堆栈的顶部。点按<strong>向上</strong>或<strong>返回</strong>会分别调用 <a href="https://developer.android.com/reference/androidx/navigation/NavController#navigateUp()" target="_blank" rel="noopener"><code>NavController.navigateUp()</code></a> 和 <a href="https://developer.android.com/reference/androidx/navigation/NavController#popBackStack()" target="_blank" rel="noopener"><code>NavController.popBackStack()</code></a> 方法，用于移除（或弹出）堆栈顶部的目的地。<br><code>NavController.popBackStack()</code> 会返回一个布尔值，表明它是否已成功返回到另一个目的地。当返回 <code>false</code> 时，最常见的情况是手动弹出导航表的起始目的地。<br>如果该方法返回 <code>false</code>，则 <code>NavController.getCurrentDestination()</code> 会返回 <code>null</code> 。此时应导航到新目的地，或通过对 Activity 调用 <code>finish()</code> 来处理弹出情况，如下例所示：</p>
<div class="hljs"><pre><code class="hljs java"><span class="hljs-keyword">if</span> (!navController.popBackStack()) &#123;
    <span class="hljs-comment">// Call finish() on your Activity</span>
    finish();
&#125;</code></pre></div>

<h3 id="popUpTo-和-popUpToInclusive"><a href="#popUpTo-和-popUpToInclusive" class="headerlink" title="popUpTo 和 popUpToInclusive"></a>popUpTo 和 popUpToInclusive</h3><p>使用操作进行导航时，可以选择从返回堆栈上弹出其他目的地。例如，如果应用具有初始登录流程，那么在用户登录后，应将所有与登录相关的目的地从返回堆栈上弹出，这样返回按钮就不会将用户带回登录流程。<br>要在从一个目的地导航到另一个目的地时弹出目的地，可以在关联的 <code>&lt;action&gt;</code> 元素中添加 <code>app:popUpTo</code> 属性。<code>app:popUpTo</code> 会告知 Navigation 库在调用 <code>navigate()</code> 的过程中从返回堆栈上弹出一些目的地。属性值是应保留在堆栈中的最新目的地的 ID。<br>还可以添加 <code>app:popUpToInclusive=&quot;true&quot;</code>，以表明在 <code>app:popUpTo</code> 中指定的目的地也应从返回堆栈中移除。<br><a href="https://developer.android.com/guide/navigation/navigation-navigate#pop" target="_blank" rel="noopener">示例</a>（有助于理解）。  </p>
<h3 id="条件导航"><a href="#条件导航" class="headerlink" title="条件导航"></a>条件导航</h3><p>在为应用设计导航时，可能需要基于条件逻辑将用户转到某一个目的地而非另一个。<a href="https://developer.android.com/guide/navigation/navigation-conditional" target="_blank" rel="noopener">例如，可能具有一些需要用户登录的目的地，或者可能在游戏中针对获胜或失败的玩家提供了不同的目的地。</a></p>
<h2 id="在目的地间传递数据"><a href="#在目的地间传递数据" class="headerlink" title="在目的地间传递数据"></a>在目的地间传递数据</h2><h3 id="定义目的地参数"><a href="#定义目的地参数" class="headerlink" title="定义目的地参数"></a>定义目的地参数</h3><p>要在目的地之间传递数据，首先按照以下步骤将参数添加到接收它的目的地来定义参数：</p>
<ol>
<li>在 Navigation Editor 中，点击接收参数的目的地。  </li>
<li>在 <strong>Attributes</strong> 面板中点击 <strong>Arguments</strong> 处的 Add（+）。</li>
<li>在弹出的面板中输入 Name、Type、参数是否为 Array、参数是否可为 null（不论基础类型的 null 性如何，数组始终可为 null），以及 Default Value（若需要），然后点击 <strong>Add</strong>。  </li>
</ol>
<h3 id="使用-Safe-Args-传递安全的数据"><a href="#使用-Safe-Args-传递安全的数据" class="headerlink" title="使用 Safe Args 传递安全的数据"></a>使用 Safe Args 传递安全的数据</h3><p>要将Safe Args添加到项目，首先在顶级 <code>build.gradle</code> 文件中包含以下 <code>classpath</code> ：</p>
<div class="hljs"><pre><code class="hljs gradle"><span class="hljs-keyword">buildscript</span> &#123;
    <span class="hljs-keyword">repositories</span> &#123;
        google()
    &#125;
    <span class="hljs-keyword">dependencies</span> &#123;
        <span class="hljs-keyword">def</span> nav_version = <span class="hljs-string">"2.3.0-alpha01"</span>
        <span class="hljs-keyword">classpath</span> <span class="hljs-string">"androidx.navigation:navigation-safe-args-gradle-plugin:$nav_version"</span>
    &#125;
&#125;</code></pre></div>

<p>同时必须应用以下两个可用插件之一。<br>要生成适用于 Java 或 Java 和 Kotlin 混合模块的 Java 语言代码，请将以下行添加到应用或模块的 <code>build.gradle</code> 文件中：</p>
<div class="hljs"><pre><code class="hljs gradle">apply plugin: <span class="hljs-string">"androidx.navigation.safeargs"</span></code></pre></div>

<p>此外，要生成适用于 Kotlin 独有的模块的 Kotlin 代码，请添加以下行：</p>
<div class="hljs"><pre><code class="hljs gradle">apply plugin: androidx.navigation.safeargs.kotlin</code></pre></div>

<h4 id="将Safe-Args用于全局操作"><a href="#将Safe-Args用于全局操作" class="headerlink" title="将Safe Args用于全局操作"></a>将Safe Args用于全局操作</h4><p>将 Safe Args 用于全局操作时，必须为根 <code>&lt;navigation&gt;</code> 元素提供一个 <code>android:id</code> 值。Navigation会根据 <code>android:id</code> 值为 <code>&lt;navigation&gt;</code> 元素生成一个 <code>Directions</code> 类。</p>
<h3 id="使用Bundle对象在目的地之间传递参数"><a href="#使用Bundle对象在目的地之间传递参数" class="headerlink" title="使用Bundle对象在目的地之间传递参数"></a>使用Bundle对象在目的地之间传递参数</h3><p>传递</p>
<div class="hljs"><pre><code class="hljs java">Bundle bundle = <span class="hljs-keyword">new</span> Bundle();
bundle.putString(<span class="hljs-string">"amount"</span>, <span class="hljs-string">"amount"</span>);
Navigation.findNavController(view).navigate(ID, bundle);</code></pre></div>

<p>接收</p>
<div class="hljs"><pre><code class="hljs java">String amount = getArguments().getString(<span class="hljs-string">"amount"</span>);</code></pre></div>

<h3 id="将数据传递给起始目的地"><a href="#将数据传递给起始目的地" class="headerlink" title="将数据传递给起始目的地"></a>将数据传递给起始目的地</h3><p>您可以将数据传递给应用的起始目的地。首先，您必须显式构建一个 <code>Bundle</code> 来存储数据。然后，使用以下方法之一将该 <code>Bundle</code> 传递给起始目的地：</p>
<ul>
<li>如果您要以编程方式创建 <code>NavHost</code>，请调用 <code>NavHostFragment.create(R.navigation.graph, args)</code>，其中 args 是存储数据的 <code>Bundle</code>。</li>
<li>或者，您也可以通过调用以下 <code>NavController.setGraph()</code> 过载之一来设置起始目的地参数：<ul>
<li>使用图表 ID：<code>navController.setGraph(R.navigation.graph, args)</code></li>
<li>使用图表本身：<code>navController.setGraph(navGraph, args)</code></li>
</ul>
</li>
</ul>
<p>要检索起始目的地中的数据，请调用 <code>Fragment.getArguments()</code>。</p>
<h2 id="为目的地创建深层链接"><a href="#为目的地创建深层链接" class="headerlink" title="为目的地创建深层链接"></a>为目的地创建深层链接</h2><h3 id="创建显示深层链接"><a href="#创建显示深层链接" class="headerlink" title="创建显示深层链接"></a>创建显示深层链接</h3><p>当用户通过显式深层链接打开您的应用时，任务返回堆栈会被清除，并被替换为相应的深层链接目的地。当嵌套图表时，每个嵌套级别的起始目的地（即层次结构中每个 <code>&lt;navigation&gt;</code> 元素的起始目的地）也会添加到相应堆栈中。也就是说，当用户从深层链接目的地按下返回按钮时，他们会返回到相应的导航堆栈，就像从入口点进入您的应用一样。</p>
<p>您可以使用 <a href="https://developer.android.com/reference/androidx/navigation/NavDeepLinkBuilder" target="_blank" rel="noopener"><code>NavDeepLinkBuilder</code></a> 类构建 <a href="https://developer.android.com/reference/android/app/PendingIntent" target="_blank" rel="noopener"><code>PendingIntent</code></a>，如下例所示。请注意，如果提供的上下文不是 <code>Activity</code>，构造函数会使用<a href="https://developer.android.com/reference/android/content/pm/PackageManager#getLaunchIntentForPackage(java.lang.String)" target="_blank" rel="noopener"><code>PackageManager.getLaunchIntentForPackage()</code></a> 作为默认Activity 来启动（如果有）。</p>
<div class="hljs"><pre><code class="hljs java">PendingIntent pendingIntent = <span class="hljs-keyword">new</span> NavDeepLinkBuilder(context)
    .setGraph(R.navigation.nav_graph)
    .setDestination(R.id.android)
    .setArguments(args)
    .createPendingIntent();</code></pre></div>

<p>如果已有 <code>NavController</code>，则还可以通过 <a href="https://developer.android.com/reference/androidx/navigation/NavController#createDeepLink()" target="_blank" rel="noopener"><code>NavController.createdDeepLink()</code></a> 创建深层链接。</p>
<h3 id="创建隐式深层链接"><a href="#创建隐式深层链接" class="headerlink" title="创建隐式深层链接"></a>创建隐式深层链接</h3><p><a href="https://developer.android.com/guide/navigation/navigation-deep-link#implicit" target="_blank" rel="noopener">创建隐式深层链接</a></p>
<h2 id="在目的地之间添加动画过渡效果"><a href="#在目的地之间添加动画过渡效果" class="headerlink" title="在目的地之间添加动画过渡效果"></a>在目的地之间添加动画过渡效果</h2><p><a href="https://developer.android.com/guide/navigation/navigation-animate-transitions" target="_blank" rel="noopener">在目的地之间添加动画过渡效果</a></p>
<h2 id="使用NavigationUI更新界面组件"><a href="#使用NavigationUI更新界面组件" class="headerlink" title="使用NavigationUI更新界面组件"></a>使用NavigationUI更新界面组件</h2><h3 id="监听导航事件"><a href="#监听导航事件" class="headerlink" title="监听导航事件"></a>监听导航事件</h3><p><code>NavController</code> 提供 <code>OnDestinationChangedListener()</code> 接口，该接口在当前目的地或其参数发生更改时调用。可以通过<a href="https://developer.android.com/reference/androidx/navigation/NavController#addOnDestinationChangedListener%28androidx.navigation.NavController.OnDestinationChangedListener%29" target="_blank" rel="noopener"><code>addOnDestinationChangedListener()</code></a> 方法注册新监听器。</p>
<p>举例来说，使用此监听器可以在应用的一些区域显示常见界面元素，而在另外一些区域隐藏这些元素。</p>
<div class="hljs"><pre><code class="hljs java">navController.addOnDestinationChangedListener(<span class="hljs-keyword">new</span> NavController.OnDestinationChangedListener() &#123;
   <span class="hljs-meta">@Override</span>
   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onDestinationChanged</span><span class="hljs-params">(@NonNull NavController controller,</span></span>
<span class="hljs-function"><span class="hljs-params">           @NonNull NavDestination destination, @Nullable Bundle arguments)</span> </span>&#123;
       <span class="hljs-keyword">if</span>(destination.getId() == R.id.full_screen_destination) &#123;
           toolbar.setVisibility(View.GONE);
           bottomNavigationView.setVisibility(View.GONE);
       &#125; <span class="hljs-keyword">else</span> &#123;
           toolbar.setVisibility(View.VISIBLE);
           bottomNavigationView.setVisibility(View.VISIBLE);
       &#125;
   &#125;
&#125;);</code></pre></div>

<h3 id="顶部应用栏"><a href="#顶部应用栏" class="headerlink" title="顶部应用栏"></a>顶部应用栏</h3><h4 id="AppBarConfiguration"><a href="#AppBarConfiguration" class="headerlink" title="AppBarConfiguration"></a>AppBarConfiguration</h4><p><code>NavigationUI</code> 使用 <a href="https://developer.android.com/reference/androidx/navigation/ui/AppBarConfiguration" target="_blank" rel="noopener"><code>AppBarConfiguration</code></a> 对象管理在应用显示区域左上角的导航按钮行为。默认情况下，如果用户位于导航图的顶级目的地，则导航按钮会隐藏并且在任何其他目的地显示为向上按钮。<br>要将导航图的起始目的地用作唯一顶级目的地，可以创建<code>AppBarConfiguration</code> 对象并传入相应的导航图，如下所示：</p>
<div class="hljs"><pre><code class="hljs java">AppBarConfiguration appBarConfiguration =
        <span class="hljs-keyword">new</span> AppBarConfiguration.Builder(navController.getGraph()).build();</code></pre></div>

<p>如果想自定义哪些目的地被视为顶级目的地，则可以改为将一组目的地ID传递给构造函数，如下所示：</p>
<div class="hljs"><pre><code class="hljs java">AppBarConfiguration appBarConfiguration =
        <span class="hljs-keyword">new</span> AppBarConfiguration.Builder(R.id.main, R.id.android).build();</code></pre></div>

<h4 id="创建工具栏"><a href="#创建工具栏" class="headerlink" title="创建工具栏"></a>创建工具栏</h4><ol>
<li>在主 Activity 中定义工具栏</li>
</ol>
<div class="hljs"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">androidx.appcompat.widget.Toolbar</span></span>
<span class="hljs-tag"><span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span></span>
<span class="hljs-tag"><span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span></span>
<span class="hljs-tag"><span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/tool_bar"</span></span>
<span class="hljs-tag"><span class="hljs-attr">tools:ignore</span>=<span class="hljs-string">"MissingConstraints"</span> /&gt;</span></code></pre></div>

<ol>
<li>通过 Activity 的 <code>onCreate()</code> 方法调用 <a href="https://developer.android.com/reference/androidx/navigation/ui/NavigationUI#setupWithNavController(android.support.v7.widget.Toolbar,%20androidx.navigation.NavController,%20androidx.navigation.ui.AppBarConfiguration)" target="_blank" rel="noopener"><code>setupWithNavController()</code></a></li>
</ol>
<div class="hljs"><pre><code class="hljs java"><span class="hljs-meta">@Override</span>
<span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> </span>&#123;
    setContentView(R.layout.activity_main);

    ...

    NavController navController = Navigation.findNavController(<span class="hljs-keyword">this</span>, R.id.nav_host_fragment);
    AppBarConfiguration appBarConfiguration =
            <span class="hljs-keyword">new</span> AppBarConfiguration.Builder(navController.getGraph()).build();
    Toolbar toolbar = findViewById(R.id.toolbar);
    NavigationUI.setupWithNavController(toolbar, navController);
&#125;</code></pre></div>

<h5 id="包含-CollapsingToolbarLayout"><a href="#包含-CollapsingToolbarLayout" class="headerlink" title="包含 CollapsingToolbarLayout"></a>包含 CollapsingToolbarLayout</h5><div class="hljs"><pre><code class="hljs java">NavigationUI.setupWithNavController(layout, toolbar, navController, appBarConfiguration);</code></pre></div>

<h5 id="操作栏添加导航支持"><a href="#操作栏添加导航支持" class="headerlink" title="操作栏添加导航支持"></a>操作栏添加导航支持</h5><p>要向默认操作栏添加导航支持，可通过 Activity 的 <code>onCreate()</code> 方法调用<a href="https://developer.android.com/reference/androidx/navigation/ui/NavigationUI#setupActionBarWithNavController(android.support.v7.app.AppCompatActivity,%20androidx.navigation.NavController,%20androidx.navigation.ui.AppBarConfiguration)" target="_blank" rel="noopener"><code>setupActionBarWithNavController()</code></a>。</p>
<div class="hljs"><pre><code class="hljs java">NavigationUI.setupActionBarWithNavController(<span class="hljs-keyword">this</span>, navController, appBarConfiguration);</code></pre></div>

<p>接着，替换 <code>onSupportNavigateUp()</code> 以处理向上导航：</p>
<div class="hljs"><pre><code class="hljs java"><span class="hljs-meta">@Override</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">onSupportNavigateUp</span><span class="hljs-params">()</span> </span>&#123;
    NavController navController = Navigation.findNavController(<span class="hljs-keyword">this</span>, R.id.nav_host_fragment);
    <span class="hljs-keyword">return</span> NavigationUI.navigateUp(navController, appBarConfiguration)
            || <span class="hljs-keyword">super</span>.onSupportNavigateUp();
&#125;</code></pre></div>

<h3 id="添加抽屉式导航栏"><a href="#添加抽屉式导航栏" class="headerlink" title="添加抽屉式导航栏"></a>添加抽屉式导航栏</h3><p>抽屉式导航栏图标会显示在使用 <code>DrawerLayout</code> 的<strong>所有顶级目的地</strong>上。顶级目的地是应用的根级目的地。它们不会在应用栏中显示向上按钮。</p>
<ol>
<li>声明 <code>DrawerLayout</code> 为根视图。</li>
<li>将 <code>DrawerLayout</code> 连接到导航图，具体方法是将其传递给 <code>AppBarConfiguration</code>，如下所示：</li>
</ol>
<div class="hljs"><pre><code class="hljs java">AppBarConfiguration appBarConfiguration =
        <span class="hljs-keyword">new</span> AppBarConfiguration.Builder(navController.getGraph())
            .setDrawerLayout(drawerLayout)
            .build();</code></pre></div>

<ol>
<li>在主 Activity 类中，通过主 Activity 的 <code>onCreate()</code> 方法调用<a href="https://developer.android.com/reference/androidx/navigation/ui/NavigationUI#setupWithNavController(android.support.v7.widget.Toolbar,%20androidx.navigation.NavController,%20androidx.navigation.ui.AppBarConfiguration)" target="_blank" rel="noopener"><code>setupWithNavController()</code></a>,如下所示：</li>
</ol>
<div class="hljs"><pre><code class="hljs java"><span class="hljs-meta">@Override</span>
<span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> </span>&#123;
    setContentView(R.layout.activity_main);

    ...

    NavController navController = Navigation.findNavController(<span class="hljs-keyword">this</span>, R.id.nav_host_fragment);
    NavigationView navView = findViewById(R.id.nav_view);
    NavigationUI.setupWithNavController(navView, navController);
&#125;</code></pre></div>

<h3 id="底部导航栏"><a href="#底部导航栏" class="headerlink" title="底部导航栏"></a>底部导航栏</h3><ol>
<li>在主 Activity 中定义底部导航栏。</li>
</ol>
<div class="hljs"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">com.google.android.material.bottomnavigation.BottomNavigationView</span></span>
<span class="hljs-tag">    <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/bottom_nav"</span></span>
<span class="hljs-tag">    <span class="hljs-attr">app:menu</span>=<span class="hljs-string">"@menu/menu_bottom_nav"</span> /&gt;</span></code></pre></div>

<ol>
<li>在主 Activity 类中，通过主 Activity 的 <code>onCreate()</code> 方法调用 <a href="https://developer.android.com/reference/androidx/navigation/ui/NavigationUI#setupWithNavController(android.support.v7.widget.Toolbar,%20androidx.navigation.NavController,%20androidx.navigation.ui.AppBarConfiguration)" target="_blank" rel="noopener"><code>setupWithNavController()</code></a> ,如下所示：</li>
</ol>
<div class="hljs"><pre><code class="hljs java"><span class="hljs-meta">@Override</span>
<span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> </span>&#123;
    setContentView(R.layout.activity_main);

    ...

    NavController navController = Navigation.findNavController(<span class="hljs-keyword">this</span>, R.id.nav_host_fragment);
    BottomNavigationView bottomNav = findViewById(R.id.bottom_nav);
    NavigationUI.setupWithNavController(bottomNav, navController);
&#125;</code></pre></div>

<h3 id="将目的地（Fragment）关联到菜单项（MenuItem）"><a href="#将目的地（Fragment）关联到菜单项（MenuItem）" class="headerlink" title="将目的地（Fragment）关联到菜单项（MenuItem）"></a>将目的地（Fragment）关联到菜单项（MenuItem）</h3><p>如果 <code>MenuItem</code> 的 <code>id</code> 与目的地的 <code>id</code> 匹配，则 <code>NavController</code> 可以导航至该目的地。<br>菜单项</p>
<div class="hljs"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">menu</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>&gt;</span>

    ...

    <span class="hljs-tag">&lt;<span class="hljs-name">item</span></span>
<span class="hljs-tag">        <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@id/details_page_fragment"</span></span>
<span class="hljs-tag">        <span class="hljs-attr">android:icon</span>=<span class="hljs-string">"@drawable/ic_details"</span></span>
<span class="hljs-tag">        <span class="hljs-attr">android:title</span>=<span class="hljs-string">"@string/details"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">menu</span>&gt;</span></code></pre></div>

<p>目的地</p>
<div class="hljs"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">navigation</span> <span class="hljs-attr">xmlns:app</span>=<span class="hljs-string">"http://schemas.android.com/apk/res-auto"</span></span>
<span class="hljs-tag">    <span class="hljs-attr">xmlns:tools</span>=<span class="hljs-string">"http://schemas.android.com/tools"</span></span>
<span class="hljs-tag">    <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span></span>
<span class="hljs-tag">    <span class="hljs-attr">...</span> &gt;</span>

    ...

    <span class="hljs-tag">&lt;<span class="hljs-name">fragment</span> <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/details_page_fragment"</span></span>
<span class="hljs-tag">         <span class="hljs-attr">android:label</span>=<span class="hljs-string">"@string/details"</span></span>
<span class="hljs-tag">         <span class="hljs-attr">android:name</span>=<span class="hljs-string">"com.example.android.myapp.DetailsFragment"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">navigation</span>&gt;</span></code></pre></div>

<p>使用 <code>onOptionsItemSelected()</code> 替换Activity的 <code>onCreateOptionsMenu()</code> 以调用 <code>onNavDestinationSelected()</code> 将菜单项与目的地相关联，如下所示：</p>
<div class="hljs"><pre><code class="hljs java"><span class="hljs-meta">@Override</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">onOptionsItemSelected</span><span class="hljs-params">(MenuItem item)</span> </span>&#123;
    NavController navController = Navigation.findNavController(<span class="hljs-keyword">this</span>, R.id.nav_host_fragment);
    <span class="hljs-keyword">return</span> NavigationUI.onNavDestinationSelected(item, navController)
            || <span class="hljs-keyword">super</span>.onOptionsItemSelected(item);
&#125;</code></pre></div>

<h2 id="使用-ViewPager-创建包含标签页的滑动视图"><a href="#使用-ViewPager-创建包含标签页的滑动视图" class="headerlink" title="使用 ViewPager 创建包含标签页的滑动视图"></a>使用 ViewPager 创建包含标签页的滑动视图</h2><p><a href="https://developer.android.com/guide/navigation/navigation-swipe-view" target="_blank" rel="noopener">示例链接</a></p>
<h2 id="以编程方式与导航组件交互"><a href="#以编程方式与导航组件交互" class="headerlink" title="以编程方式与导航组件交互"></a>以编程方式与导航组件交互</h2><div class="hljs"><pre><code class="hljs java">NavHostFragment finalHost = NavHostFragment.create(R.navigation.example_graph);
getSupportFragmentManager().beginTransaction()
    .replace(R.id.nav_host, finalHost)
    .setPrimaryNavigationFragment(finalHost) <span class="hljs-comment">// this is the equivalent to app:defaultNavHost="true"</span>
    .commit();</code></pre></div>

<p>请注意，<code>setPrimaryNavigationFragment(finalHost)</code> 允许您的 <code>NavHost</code> 截获对系统“返回”按钮的按下操作。您也可以添加 <code>app:defaultNavHost=&quot;true&quot;</code>，在 <code>NavHost</code> XML 中实现此行为。如果要实现<a href="https://developer.android.com/guide/navigation/navigation-custom-back" target="_blank" rel="noopener">自定义“返回”按钮行为</a>，并且不希望 <code>NavHost</code> 截获对“返回”按钮的按下操作，您可以将 <code>null</code> 传递给 <code>setPrimaryNavigationFragment()</code>。</p>

            </article>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/%E5%AE%89%E5%8D%93/">安卓</a>
                    
                      <a class="hover-with-bg" href="/categories/%E5%AE%89%E5%8D%93/%E7%BB%84%E4%BB%B6/">组件</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/">基础知识</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" target="_blank" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！</p>
              
              
                <div class="post-prevnext row">
                  <div class="post-prev col-6">
                    
                    
                      <a href="/2020/07/02/Resource/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Resource</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </div>
                  <div class="post-next col-6">
                    
                    
                      <a href="/2020/07/01/Retrofit/">
                        <span class="hidden-mobile">Retrofit使用</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </div>
                </div>
              
            </div>

            
          </div>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;
  目录</p>
  <div id="tocbot"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    
  </main>

  
    <a id="scroll-top-button" href="#" role="button">
      <i class="iconfont icon-arrowup" aria-hidden="true"></i>
    </a>
  

  
    <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
  

  

  

  <footer class="mt-5">
  <div class="text-center py-3">
    <!-- <div>
      <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a>
      <i class="iconfont icon-love"></i>
      <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener">
        <span>Fluid</span></a>
    </div> -->
    
  <div class="statistics">
    
    

    
      
        <!-- 不蒜子统计PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            总访问量 
            <span id="busuanzi_value_site_pv"></span>
             次
          </span>
      
      
        <!-- 不蒜子统计UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            总访客数 
            <span id="busuanzi_value_site_uv"></span>
             人
          </span>
      
    
  </div>


    

    
  </div>
</footer>

<!-- SCRIPTS -->
<script  src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js" ></script>
<script  src="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/main.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/lazyload.js" ></script>
  



  <script defer src="https://cdn.staticfile.org/clipboard.js/2.0.6/clipboard.min.js" ></script>
  <script  src="/js/clipboard-use.js" ></script>



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





  <script  src="https://cdn.staticfile.org/tocbot/4.11.1/tocbot.min.js" ></script>
  <script>
    $(document).ready(function () {
      var boardCtn = $('#board-ctn');
      var boardTop = boardCtn.offset().top;

      tocbot.init({
        tocSelector: '#tocbot',
        contentSelector: 'article.markdown-body',
        headingSelector: 'h1,h2,h3,h4,h5,h6',
        linkClass: 'tocbot-link',
        activeLinkClass: 'tocbot-active-link',
        listClass: 'tocbot-list',
        isCollapsedClass: 'tocbot-is-collapsed',
        collapsibleClass: 'tocbot-is-collapsible',
        collapseDepth: 0,
        scrollSmooth: true,
        headingsOffset: -boardTop
      });
      if ($('.toc-list-item').length > 0) {
        $('#toc').css('visibility', 'visible');
      }
    });
  </script>



  <script  src="https://cdn.staticfile.org/typed.js/2.0.11/typed.min.js" ></script>
  <script>
    var typed = new Typed('#subtitle', {
      strings: [
        '  ',
        "安卓导航组件&nbsp;",
      ],
      cursorChar: "_",
      typeSpeed: 70,
      loop: false,
    });
    typed.stop();
    $(document).ready(function () {
      $(".typed-cursor").addClass("h2");
      typed.start();
    });
  </script>



  <script  src="https://cdn.staticfile.org/anchor-js/4.2.2/anchor.min.js" ></script>
  <script>
    anchors.options = {
      placement: "right",
      visible: "hover",
      
    };
    var el = "h1,h2,h3,h4,h5,h6".split(",");
    var res = [];
    for (item of el) {
      res.push(".markdown-body > " + item)
    }
    anchors.add(res.join(", "))
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    var path = "/local-search.xml";
    var inputArea = document.querySelector("#local-search-input");
    inputArea.onclick = function () {
      searchFunc(path, 'local-search-input', 'local-search-result');
      this.onclick = null
    }
  </script>



  <script  src="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css" />

  <script>
    $('#post img:not(.no-zoom img, img[no-zoom]), img[zoom]').each(
      function () {
        var element = document.createElement('a');
        $(element).attr('data-fancybox', 'images');
        $(element).attr('href', $(this).attr('src'));
        $(this).wrap(element);
      }
    );
  </script>




















</body>
</html>
